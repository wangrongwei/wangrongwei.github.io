---
layout: post
title: 一个基于i386的系统内核
categories: project
comments: true
tags: 
teaser:
    OSlogo.jpg

---

> 一个基于i386的系统内核

> 文章欢迎转载，但转载时请保留本段文字，并置于文章的顶部
> 作者：lollipop
> 本文原文地址：<http://wangrongwei.com{{ page.url }}>



## 简介

一个简答的OS，目前已完成到进程调度模型，其他部分正在完善中。



## UNIX386



### boot



以下是启动相关代码：

```c
ORG	BOOT_ADDR	;必须是这个地址
;初始化段SS=0 DS=0 ES=0 SP指向程序加载的地址
;因为程序加载的地址是0x7c00，所以我们的段地址必须是0，
;不然地址就不是0x7c00
	MOV	AX,CS
	MOV	SS,AX
	MOV	SP,BOOT_ADDR
	MOV	DS,AX
	MOV	ES,AX
;
;The second stage
;	Now ,load kernel from img
;
	MOV	SI,msg
putloop:
	MOV	AL,[SI]
	ADD	SI,1
	CMP	AL,0
	JE	Read_Sector
	MOV	AH,0x0e
	MOV	BX,0x0f
	INT	0x10		;ִ执行BIOS中断0x10
	JMP	putloop

Read_Sector:
	MOV	SI,msg_1	;打开成功显示字符
Read:
	MOV	AL,[SI]
	ADD	SI,1
	CMP	AL,0
	JE	Read_Ok
	MOV	AH,0x0e
	MOV	BX,0x0f
	INT	0x10		;ִ执行BIOS中断0x10
	JMP	Read
```

在i386中，BIOS上电一段时间进行内存划分，中断向量表的初始化，最终将会跳转到0x7c00执行。boot相关的代码即为跳转到0x7c00后待执行的代码。这段代码将使用：

```c
ORG	BOOT_ADDR
```

表明后续的代码将会被拷贝到内存的0x7c00处。





### 内存管理

TODO

### 进程模型

TODO

### 调度

TODO

### 中断子系统

TODO





## 链接

- 项目主页：[UNIX386](https://github.com/wangrongwei/UNIX386)









